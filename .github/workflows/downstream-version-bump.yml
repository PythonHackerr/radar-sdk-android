# When a new release is created on GitHub, this workflow sends an event
# to cross-platform SDK repos that depend on native Android SDK
name: Downstream version bump
on:
  # Triggered when a new release is tagged in GitHub.
  release:
    types: [ published ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  notify:
    runs-on: macos-latest
    steps:
      - name: Notify React Native SDK
        uses: peter-evans/repository-dispatch@v2
        with:
          token: ${{ secrets.RADAR_CIRCLECI_PAT }}
          repository: radarlabs/react-native-radar
          event-type: android-sdk-release
          client-payload: '{"release": "${{ github.event.release.tag_name }}"}'
